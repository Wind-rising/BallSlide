var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},__awaiter=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,a){function o(t){try{h(i.next(t))}catch(e){a(e)}}function s(t){try{h(i["throw"](t))}catch(e){a(e)}}function h(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(o,s)}h((i=i.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function n(t){return function(e){return i([t,e])}}function i(n){if(r)throw new TypeError("Generator is already executing.");for(;h;)try{if(r=1,a&&(o=a[2&n[0]?"return":n[0]?"throw":"next"])&&!(o=o.call(a,n[1])).done)return o;switch(a=0,o&&(n=[0,o.value]),n[0]){case 0:case 1:o=n;break;case 4:return h.label++,{value:n[1],done:!1};case 5:h.label++,a=n[1],n=[0];continue;case 7:n=h.ops.pop(),h.trys.pop();continue;default:if(o=h.trys,!(o=o.length>0&&o[o.length-1])&&(6===n[0]||2===n[0])){h=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){h.label=n[1];break}if(6===n[0]&&h.label<o[1]){h.label=o[1],o=n;break}if(o&&h.label<o[2]){h.label=o[2],h.ops.push(n);break}o[2]&&h.ops.pop(),h.trys.pop();continue}n=e.call(t,h)}catch(i){n=[6,i],a=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var r,a,o,s,h={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},BtnEventObj=function(){function t(){}return t}();__reflect(BtnEventObj.prototype,"BtnEventObj");var UIBaseMenu=function(t){function e(e){var n=t.call(this)||this;return n.m_bIsHideBack=!1,n.m_nZorder=10,n.m_byMenuGroup=0,n.m_bMyVisable=!0,n.m_vEvents=[],n.skinName=e,n}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.top=null,this.bottom=null,this.left=null,this.right=null},e.prototype.Open=function(){UICenter.getInstance().OpenForm(this),this.start()},e.prototype.start=function(){var t=this;void 0!=this.Close&&this.AddEvent(this.Close,egret.TouchEvent.TOUCH_TAP,function(e){t.Closed()},this)},e.prototype.Closed=function(){UICenter.getInstance().CloseForm(this),this.end()},e.prototype.end=function(){for(var t=0;t<this.m_vEvents.length;t++){var e=this.m_vEvents[t];e.pBtn.removeEventListener(e.type,e.listener,e.thisObject)}this.m_vEvents.splice(0,this.m_vEvents.length)},e.prototype.AddEvent=function(t,e,n,i){for(var r=null,a=0;a<this.m_vEvents.length;a++)if(this.m_vEvents[a].pBtn==t&&this.m_vEvents[a].type==e){r=this.m_vEvents[a];break}null==r?(r=new BtnEventObj,r.pBtn=t,r.type=e,this.m_vEvents.push(r)):r.pBtn.removeEventListener(r.type,r.listener,r.thisObject),r.listener=n,r.thisObject=i,r.pBtn.addEventListener(r.type,r.listener,r.thisObject)},e.prototype.Update=function(){},e}(eui.Component);__reflect(UIBaseMenu.prototype,"UIBaseMenu");var CNumberSpr=function(t){function e(e,n){var i=t.call(this)||this;i.m_nWidth=0,i.m_nSpeedX=0,i.m_nSpeedY=0,i.m_nStartTick=0,i.m_nPreTick=0;var r=Math.floor(e),a="Battle_Num_Green";0>r&&(r=-r,a="Battle_Num_Red");do{var o=r%10,s=new egret.Bitmap(RES.getRes(a+o+"_png"));i.addChild(s),s.x=-i.m_nWidth,i.m_nWidth+=s.width+1,r=Math.floor(r/10)}while(r>0);return i}return __extends(e,t),e.CreateNumSpr=function(t,n){var i=new e(t,n);return i.x=-30+60*Math.random(),i.y=0,i.m_nStartTick=egret.getTimer(),i.m_nPreTick=i.m_nStartTick,i.m_nSpeedX=-60+120*Math.random(),i.m_nSpeedY=300+150*Math.random(),i},e.prototype.RunMove=function(){var t=egret.getTimer()-this.m_nPreTick;this.x+=this.m_nSpeedX*t/1e3*3,this.y-=this.m_nSpeedY*t/1e3*3,this.m_nSpeedY-=1e3*t/1e3;var e=egret.getTimer()-this.m_nStartTick;return e>500&&(this.alpha=(1e3-e)/500),e>=800?!1:(this.m_nPreTick=egret.getTimer(),!0)},e}(egret.Sprite);__reflect(CNumberSpr.prototype,"CNumberSpr");var CEffectSpr=function(t){function e(e,n,i,r,a){var o=t.call(this)||this;o.m_nStartTick=0,o.m_nEndTick=0,o.m_nEffID=0,o.m_nZorder=1,o.m_nMarkID=0,o.m_pEff=null,o.m_pArmature=null;var s=RES.getRes(e+"_ske_json"),h=RES.getRes(e+"_tex_json"),c=RES.getRes(e+"_tex_png");if(null==s||null==h||null==c)return o;var u=new dragonBones.EgretFactory;if(u.addSkeletonData(dragonBones.DataParser.parseDragonBonesData(s)),u.addTextureAtlas(new dragonBones.EgretTextureAtlas(c,h)),0==i){if(o.m_pArmature=u.buildFastArmature("Sprite"),o.m_pArmature){o.m_pArmature.enableAnimationCache(30);var l=o.m_pArmature.getDisplay();o.addChild(l),dragonBones.WorldClock.clock.add(o.m_pArmature),o.m_pArmature.animation.play(null,0)}}else if(o.m_pArmature=u.buildFastArmature("armatureName"),o.m_pArmature){if(o.m_pArmature){var p=o.m_pArmature.getSlot("1");p&&void 0!=r&&(p.display=r),p=o.m_pArmature.getSlot("2"),p&&void 0!=a&&(p.display=a)}o.m_pArmature.enableAnimationCache(30);var l=o.m_pArmature.getDisplay();o.addChild(l),dragonBones.WorldClock.clock.add(o.m_pArmature),o.m_pArmature.animation.play(n,0)}return o.m_nStartTick=egret.getTimer(),o}return __extends(e,t),e.CreateEff=function(t,n,i){for(var r=ConfigData.getInterface().EffectCfg_json,a=null,o=r.cnt;o>0;o--)if(r[o].ID==t){a=new e(r[o].file,r[o].act,r[o].type,n,i),a.m_pEff=r[o],a.m_nEffID=t,a.scaleX=a.m_pEff.scale/100,a.scaleY=a.m_pEff.scale/100,a.m_nZorder=a.m_pEff.zorder;var s=r[o].mark;void 0!=s&&(a.m_nMarkID=s);var h=parseInt(r[o].time);h&&(a.m_nEndTick=a.m_nStartTick+h),r[o].sound&&ZSoundCenter.GetInstance().PlaySound(r[o].sound+"_mp3");break}return a},e.prototype.CheckEnd=function(){return this.m_nEndTick&&this.m_nEndTick<=egret.getTimer()?!0:!1},e.prototype.Clear=function(){this.m_pArmature&&dragonBones.WorldClock.clock.remove(this.m_pArmature)},e}(egret.Sprite);__reflect(CEffectSpr.prototype,"CEffectSpr");var Main=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){egret.lifecycle.addLifecycleListener(function(t){t.onUpdate=function(){}}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(n){switch(n.label){case 0:return[4,this.loadResource()];case 1:return n.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return t=n.sent(),[4,platform.login()];case 3:return n.sent(),[4,platform.getUserInfo()];case 4:return e=n.sent(),console.log(e),[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,n){var i=new eui.Theme("resource/default.thm.json",t.stage);i.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),t=new LoadingUI,this.stage.addChild(t),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return n.sent(),[4,this.loadTheme()];case 2:return n.sent(),[4,RES.loadGroup("preload",0,t)];case 3:return n.sent(),this.stage.removeChild(t),[3,5];case 4:return e=n.sent(),console.error(e),[3,5];case 5:return[2]}})})},e.prototype.createGameScene=function(){StartUp.getInstance(),this.stage.addChild(UICenter.getInstance()),MainMenu.getInstance().m_pGameMain.Open()},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,n,i){function r(t){e.call(i,t)}function a(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),n.call(i))}"undefined"!=typeof generateEUI?egret.callLater(function(){e.call(i,generateEUI)},this):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),RES.getResByUrl(t,r,this,RES.ResourceItem.TYPE_TEXT))},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var GameData=function(){function t(){this.rotationSpeed=.08,this.restrict_rotaion=30}return t.getInstance=function(){return null==t.g_GameData&&(t.g_GameData=new t),t.g_GameData},t.prototype.init=function(){return t.g_GameData=new t,t.g_GameData},t.g_GameData=null,t}();__reflect(GameData.prototype,"GameData");var BalanceBar=function(t){function e(){var e=t.call(this)||this;return e.touchID=[],e.init(),e}return __extends(e,t),e.prototype.init=function(){Adapt.getInstance().SETBitmap({obj:this,res:"Stick_png",sign:"width",length:1.5,anchorX:.5,anchorY:.5,x:.5,y:.7})},e}(egret.Bitmap);__reflect(BalanceBar.prototype,"BalanceBar");var TouchScreen=function(t){function e(){var e=t.call(this)||this;return e.timer=new egret.Timer(1e3/150,0),e.startTime=0,e.endTime=0,e.s_r=GameData.getInstance().rotationSpeed,e.touchID=null,e.init(),e}return __extends(e,t),e.prototype.init=function(){Adapt.getInstance().SETBitmap({obj:this,width:.5,height:.9,guideY:"bottom-bottom",y:0}),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.begin,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.end,this),this.timer.addEventListener(egret.TimerEvent.TIMER,this.ticker,this)},e.prototype.begin=function(t){this.touchID=t.touchPointID,GameMain.getInstance().exa_BalanceBar.touchID.push(t.touchPointID),this.startTime=+new Date,this.timer.start()},e.prototype.end=function(){for(var t=GameMain.getInstance().exa_BalanceBar.touchID,e=0;e<t.length;e++)if(t[e]==this.touchID){t.splice(e,1);break}this.timer.stop()},e.prototype.ticker=function(){if(GameMain.getInstance().exa_BalanceBar.touchID[0]!=this.touchID)return void(this.startTime=+new Date);this.endTime=+new Date;var t=(this.endTime-this.startTime)*this.s_r,e=GameData.getInstance().restrict_rotaion,n=GameMain.getInstance().exa_BalanceBar.rotation;t=n+t,Math.abs(t)>e&&(t=this.s_r>0?e:-e),GameMain.getInstance().exa_BalanceBar.rotation=t,GameMain.getInstance().exa_Ball.move(),this.startTime=+new Date},e}(egret.Bitmap);__reflect(TouchScreen.prototype,"TouchScreen");var TouchScreenLeft=function(t){function e(){var e=t.call(this)||this;return e.s_r=e.s_r,e.init(),e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),Adapt.getInstance().SETBitmap({obj:this,x:0})},e}(TouchScreen);__reflect(TouchScreenLeft.prototype,"TouchScreenLeft");var TouchScreenRight=function(t){function e(){var e=t.call(this)||this;return e.s_r=-e.s_r,e.init(),e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),Adapt.getInstance().SETBitmap({obj:this,x:.5})},e}(TouchScreen);__reflect(TouchScreenRight.prototype,"TouchScreenRight");var Restrict=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){Adapt.getInstance().SETBitmap({obj:this,res:"sanjiao_png",sign:"width",length:.2})},e}(egret.Bitmap);__reflect(Restrict.prototype,"Restrict");var Ball=function(t){function e(e){var n=t.call(this)||this;return n.father=null,n.noAnmationRotation=0,n.m=1,n.F=0,n.dis=0,n.A=0,n.V=0,n.Ax=0,n.Ay=0,n.Vx=0,n.Vy=0,n.father=e,n.init(),StartUp.getInstance().timer.addEventListener(egret.TimerEvent.TIMER,n.ticker,n),n}return __extends(e,t),e.prototype.init=function(){Adapt.getInstance().SETBitmap({obj:this,res:"Earth2_png",sign:"width",length:.2,x:.5,anchorX:.5,anchorY:.5}),this.initPos(),this.move()},e.prototype.initPos=function(){var t=Adapt.getInstance().Triangle({A:this.father.rotation,c:this.height/2+this.father.height/2});this.y=this.father.y-t.b,this.x=this.father.x+t.a,this.rotation-=this.noAnmationRotation-this.father.rotation,this.noAnmationRotation=this.father.rotation,this.calcAcc()},e.prototype.move=function(){var t=Adapt.getInstance().Triangle({a:this.width/2+this.father.height/2,b:this.dis}),e=this.father.rotation-t.A,n=Adapt.getInstance().Triangle({A:e,c:t.c});if(this.dis<0){var i=Adapt.getInstance().Triangle({B:this.father.rotation,c:this.father.height+this.width});this.x=this.father.x-n.b+i.b,this.y=this.father.y-n.a-i.a}else this.x=this.father.x+n.b,this.y=this.father.y+n.a;if(this.rotation-=this.noAnmationRotation-this.father.rotation,this.noAnmationRotation=this.father.rotation,this.x<this.width/2){var r=Adapt.getInstance().Triangle({A:90-this.father.rotation,a:this.father.height/2}),a=Adapt.getInstance().Triangle({A:this.father.rotation,b:Adapt.getInstance().stageWidth/2});console.log(a);var o=Adapt.getInstance().Triangle({A:this.father.rotation,b:this.width/2+this.father.height/2});if(this.x=this.width/2,a.a<0){var s=Adapt.getInstance().Triangle({A:(90-this.father.rotation)/2,a:this.width/2});this.y=this.father.y-a.a+r.c+s.b-2*o.c,this.dis=-(a.c-s.b)}else{var s=Adapt.getInstance().Triangle({A:(90+this.father.rotation)/2,a:this.width/2});console.log(a.a,r.c,s.b),this.y=this.father.y-a.a-r.c-s.b,this.dis=-(a.c-s.b)}this.V=0,this.Vx=0,this.Vy=0}else if(this.x>Adapt.getInstance().stageWidth-this.width/2){var r=Adapt.getInstance().Triangle({A:90-this.father.rotation,a:this.father.height/2}),a=Adapt.getInstance().Triangle({A:this.father.rotation,b:Adapt.getInstance().stageWidth/2});console.log(a);var s=Adapt.getInstance().Triangle({A:(90-this.father.rotation)/2,a:this.width/2});this.x=Adapt.getInstance().stageWidth-this.width/2,this.y=this.father.y+a.a-r.c-s.b,this.dis=a.c-s.b,this.V=0,this.Vx=0,this.Vy=0}this.calcAcc()},e.prototype.calcAcc=function(){this.F=Adapt.getInstance().powerDispersed({m:this.m,rotation:this.father.rotation}),this.A=this.F/this.m;var t=Adapt.getInstance().Triangle({c:this.A,A:this.father.rotation}),e=Adapt.getInstance().Triangle({c:this.V,A:this.father.rotation});this.Ax=t.b,this.Ay=t.a,this.Vx=e.b,this.Vy=e.a},e.prototype.ticker=function(){if(this.x<this.width/2||this.x>Adapt.getInstance().stageWidth-this.width/2){if(this.x<this.width/2&&this.Vx<0&&this.father.rotation>0||this.x>Adapt.getInstance().stageWidth-this.width/2&&this.Vx>0&&this.father.rotation<0){this.A=0,this.Ax=0,this.Ay=0,this.V=0,this.Vx=0,this.Vy=0,this.move();var t=StartUp.getInstance().intervalTime/1e3;return this.V+=this.A*t,this.Vx+=this.Ax*t,this.Vy+=this.Ay*t,this.dis+=this.V,this.x+=this.Vx,this.y+=this.Vy,void console.log(this.Vx)}if(this.x<this.width/2&&this.father.rotation<0||this.x>Adapt.getInstance().stageWidth-this.width/2&&this.father.rotation>0)return this.A=0,this.Ax=0,this.Ay=0,this.V=0,this.Vx=0,void(this.Vy=0)}var e=StartUp.getInstance().intervalTime/1e3;this.V+=this.A*e,this.Vx+=this.Ax*e,this.Vy+=this.Ay*e,this.dis+=this.V,this.x+=this.Vx,this.y+=this.Vy},e}(egret.Bitmap);__reflect(Ball.prototype,"Ball");var Adapt=function(){function t(){this.stageWidth=UICenter.getInstance().stage.$stageWidth,this.stageHeight=UICenter.getInstance().stage.$stageHeight,this.intervalTime=0,this.obj=null,this.init={}}return t.getInstance=function(){return null==t.c_adapt&&(t.c_adapt=new t),t.c_adapt},t.prototype.SETBitmap=function(t){var e=void 0===t?{}:t,n=e.obj,i=void 0===n?null:n,r=e.res,a=void 0===r?null:r,o=e.anchorX,s=void 0===o?null:o,h=e.anchorY,c=void 0===h?null:h,u=e.sign,l=void 0===u?null:u,p=e.length,g=void 0===p?null:p,f=e.width,d=void 0===f?null:f,_=e.height,m=void 0===_?null:_,y=e.guideX,v=void 0===y?null:y,S=e.guideY,T=void 0===S?null:S,k=e.x,w=void 0===k?null:k,A=e.y,b=void 0===A?null:A,I=e.posAnchorX,E=void 0===I?null:I,B=e.posAnchorY,M=void 0===B?null:B,x=e.isAutoAnchor,R=void 0===x?!0:x;if("object"!=typeof i)return console.error("非法对象："+i),this.obj=null,!1;this.obj=i;var C="number"==typeof s,L="number"==typeof c;"string"==typeof a&&this.SetTexture(a),C||R&&this.ReSetAnchorX(),L||R&&this.ReSetAnchorY(),"string"==typeof l&&"number"==typeof g&&"width"==l?this.AdaptWidth(g*this.stageWidth):"height"==l&&this.AdaptHeight(g*this.stageHeight),"number"==typeof d&&this.SetWidth(d*this.stageWidth),"number"==typeof m&&this.SetHeight(m*this.stageHeight),C?this.SetAnchorX(s):R&&this.ReSetAnchorX(),L?this.SetAnchorY(c):R&&this.ReSetAnchorY(),("string"==typeof v||"number"==typeof w)&&this.SetPosX({guide:v,length:w*this.stageWidth,anchorX:E}),("string"==typeof T||"number"==typeof b)&&this.SetPosY({guide:T,length:b*this.stageHeight,anchorY:M})},t.prototype.SetTexture=function(t){var e=RES.getRes(t);this.obj.texture=e},t.prototype.AdaptWidth=function(t){var e=this.obj;e.height=e.height/e.width*t,e.width=t},t.prototype.AdaptHeight=function(t){var e=this.obj;e.width=e.width/e.height*t,e.height=t},t.prototype.SetWidth=function(t){this.obj.width=t},t.prototype.SetHeight=function(t){this.obj.height=t},t.prototype.SetAnchor=function(t,e){this.SetAnchorX(t),this.SetAnchorY(e)},t.prototype.SetAnchorX=function(t){var e=this.obj;e.$anchorOffsetX=e.width*t},t.prototype.SetAnchorY=function(t){var e=this.obj;e.$anchorOffsetY=e.height*t},t.prototype.ReSetAnchorX=function(){var t=this.obj;this.init.anchorX?t.$anchorOffsetX=this.init.anchorX*t.width:this.init.anchorX=t.$anchorOffsetX/t.width},t.prototype.ReSetAnchorY=function(){var t=this.obj;this.init.anchorY?t.$anchorOffsetY=this.init.anchorY*t.height:this.init.anchorY=t.$anchorOffsetY/t.height},t.prototype.SetPosX=function(t){var e=void 0===t?{}:t,n=e.guide,i=void 0===n?null:n,r=e.length,a=void 0===r?null:r,o=e.anchorX,s=void 0===o?null:o,h=this.obj,c="number"==typeof s?h.$anchorOffsetX-s*this.stageWidth:0,u=h.$anchorOffsetX-c,l=h.width-h.$anchorOffsetX-c,p=null;switch(i){case"left-left":p=0+u+a;break;case"left-right":p=0-l+a;break;case"right-right":p=this.stageWidth-l-a;break;case"right-left":p=this.stageWidth+u-a;break;case"center-center":p=this.stageWidth/2+a;break;case"center-left":p=this.stageWidth/2+u+a;break;case"center-right":p=this.stageWidth/2-l+a;break;case"none":default:p=a}null!=typeof p&&(h.x=p)},t.prototype.SetPosY=function(t){var e=void 0===t?{}:t,n=e.guide,i=void 0===n?null:n,r=e.length,a=void 0===r?null:r,o=e.anchorY,s=void 0===o?null:o,h=this.obj,c="number"==typeof s?h.$anchorOffsetY-s*this.stageHeight:0,u=h.$anchorOffsetY-c,l=h.height-h.$anchorOffsetY-c,p=null;switch(i){case"top-top":p=0+u+a;break;case"top-bottom":p=0-l+a;break;case"bottom-bottom":p=this.stageHeight-l-a;break;case"bottom-top":p=this.stageHeight+u-a;break;case"center-center":p=this.stageHeight/2+a;break;case"center-top":p=this.stageHeight/2+u+a;break;case"center-bottom":p=this.stageHeight/2-l+a;break;case"none":default:p=a}null!=typeof p&&(h.y=p)},t.prototype.Triangle=function(t){var e=void 0===t?{}:t,n=e.a,i=void 0===n?null:n,r=e.b,a=void 0===r?null:r,o=e.c,s=void 0===o?null:o,h=e.A,c=void 0===h?null:h,u=e.B,l=void 0===u?null:u,p=0,g=0;return"number"==typeof i&&p++,"number"==typeof a&&p++,"number"==typeof s&&p++,"number"==typeof c&&g++,"number"==typeof l&&g++,1>g&&2>p?void console.error("所传参数无法计算三角函数"):(g?((null==c||null==l)&&(null!=c&&(l=90-c),null!=l&&(c=90-l)),(null==i||null==a||null==s)&&(null!=i?(null==s&&(s=this.sinToc(i,c)),null==a&&(a=this.sinToa(s,l))):null!=a?(null==s&&(s=this.sinToc(a,l)),null==i&&(i=this.sinToa(s,c))):null!=s&&(null==i&&(i=this.sinToa(s,c)),null==a&&(a=this.sinToa(s,l))))):((null==i||null==s||null==a)&&(null==i&&(i=Math.sqrt(s*s-a*a)),null==a&&(a=Math.sqrt(s*s-i*i)),null==s&&(s=Math.sqrt(i*i+a*a))),c=this.radianToAngle(Math.asin(i/s)),l=this.radianToAngle(Math.asin(a/s))),{a:i,b:a,c:s,A:c,B:l})},t.prototype.sinToc=function(t,e){var n=t/Math.sin(this.angleToRadian(e));return n},t.prototype.sinToa=function(t,e){var n=t*Math.sin(this.angleToRadian(e));return n},t.prototype.cosTob=function(t,e){var n=t*Math.cos(this.angleToRadian(e));return n},t.prototype.cosToc=function(t,e){t/Math.cos(this.angleToRadian(e));return t},t.prototype.aANDcToA=function(t,e){var n=Math.asin(t/e);return n},t.prototype.aANDcToB=function(t,e){var n=Math.acos(t/e);return n},t.prototype.angleToRadian=function(t){return Math.PI/180*t},t.prototype.radianToAngle=function(t){return 180/Math.PI*t},t.prototype.powerDispersed=function(t){var e=t.m,n=t.rotation,i=(t.μs,t.μk),r=void 0===i?0:i,a=0,o=9.8/e;return a=n/180%2==0?0:(n+90)%180==0?o:this.Triangle({c:o,B:n}).b*(1-r)},t.c_adapt=null,t}();__reflect(Adapt.prototype,"Adapt");var ConfigData=function(){function t(){this.EffectCfg_json=RES.getRes("EffectCfg_json"),this.ProjectData=RES.getRes("project_json")}return t.getInterface=function(){return null==this.configData&&(this.configData=new t),this.configData},t}();__reflect(ConfigData.prototype,"ConfigData");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.onProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var ZSoundCenter=function(){function t(){this.runningMusic=null,this.backMusicChannel=null,this.testChannel=null,this.inPlayerEff=[],this._isPlayBack=!0,this._isPlaySound=!0}return t.GetInstance=function(){return null==t.s_pSoundInstance&&(t.s_pSoundInstance=new t),t.s_pSoundInstance},t.prototype.PlayBackMusic=function(t){this._isPlayBack&&(this.backMusicChannel&&this.backMusicChannel.stop(),this.runningMusic=RES.getRes(t),this.runningMusic.type=egret.Sound.MUSIC,this.runningMusic&&(this.backMusicChannel=this.runningMusic.play()))},t.prototype.PlaySound=function(t){if(this._isPlaySound){var e=RES.getRes(t);e&&(console.log("Sound"+t),e.type=egret.Sound.EFFECT,e.play(0,1))}},t.prototype.StopBack=function(t){t?(this._isPlayBack=!0,this.backMusicChannel&&(this.backMusicChannel=this.runningMusic.play())):(this._isPlayBack=!1,this.backMusicChannel&&this.backMusicChannel.stop())},t.prototype.StopSound=function(t){this._isPlaySound=t},t.s_pSoundInstance=null,t}();__reflect(ZSoundCenter.prototype,"ZSoundCenter");var StartUp=function(){function t(){this.startTime=+new Date,this.endTime=+new Date,this.intervalTime=0,this.timer=new egret.Timer(1e3/150,0)}return t.getInstance=function(){return null==t.p_startup&&(t.p_startup=new t,t.p_startup.init()),t.p_startup},t.prototype.init=function(){this.timer.addEventListener(egret.TimerEvent.TIMER,this.upDate,this),this.timer.start()},t.prototype.upDate=function(){this.startTime=+new Date,this.intervalTime=this.startTime-this.endTime,this.endTime=+new Date},t.p_startup=null,t}();__reflect(StartUp.prototype,"StartUp");var BaseWSocket=function(){function t(t){this.parent=null,this.parent=t,this.webSocket=new egret.WebSocket,this.webSocket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReceiveMessage,this),this.webSocket.addEventListener(egret.Event.CONNECT,this.onSocketOpen,this),this.webSocket.addEventListener(egret.Event.CLOSE,this.onSocketClose,this),this.webSocket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onSocketError,this),this.webSocket.type=egret.WebSocket.TYPE_BINARY}return t.prototype.ConnetTo=function(t,e){this.webSocket.connectByUrl(t)},t.prototype.onSocketOpen=function(){var t="aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa";console.log("连接成功，发送数据："+t),this.parent.LinkOk(this)},t.prototype.onSocketClose=function(){var t="Hello Egret WebSocket";console.log("连接失败："+t)},t.prototype.onSocketError=function(t){console.log("错误代码："+t.error)},t.prototype.onReceiveMessage=function(t){var e=new egret.ByteArray;this.webSocket.readBytes(e,0,0),e.endian=egret.Endian.LITTLE_ENDIAN;var n=e.readByte(),i=e.readByte();101==n&&0==i||(this.parent.m_bTestLink?5==n&&2==i&&this.parent.LoginOk(this,e):this.parent.dispatchEventWith("packet_"+n+"_"+i,!1,e))},t}();__reflect(BaseWSocket.prototype,"BaseWSocket");var MyTestLink=function(){function t(){this.pSocket=null,this.linkTick=0}return t.prototype.rqHeatBeat=function(){var t=new egret.ByteArray;t.endian=egret.Endian.LITTLE_ENDIAN,t.writeByte(5),t.writeByte(44),this.pSocket.webSocket.writeBytes(t)},t.prototype.onLoginOk=function(t){var e=t.readByte();if(console.log("连接服务器成功!!"+e),0==e){t.readByte();var n=t.readInt(),i=t.readInt(),r=new egret.ByteArray;r.endian=egret.Endian.LITTLE_ENDIAN,r.writeByte(5),r.writeByte(5),r.writeInt(n),r.writeInt(i),r.writeInt(0),r.writeByte(0);var a=r.length;r.writeUTFBytes("h5"),r.length=a+25,r.position=r.length,r.writeInt(1),this.pSocket.webSocket.writeBytes(r);var r=new egret.ByteArray;r.endian=egret.Endian.LITTLE_ENDIAN,r.writeByte(5),r.writeByte(7),r.writeInt(n),r.writeInt(i);var a=r.length;r.length=a+20,r.position=r.length,r.writeInt(0),r.writeInt(1),this.pSocket.webSocket.writeBytes(r)}},t.prototype.onlinkOk=function(){var t=new egret.ByteArray;t.endian=egret.Endian.LITTLE_ENDIAN,t.writeByte(5),t.writeByte(45);var e=t.length;t.writeUTFBytes("xfj_H5_main"),t.length=e+25,t.position=t.length,t.writeInt(1),this.pSocket.webSocket.writeBytes(t),console.log("网络连接OK"),this.RqLoginAcc()},t.prototype.RqLoginAcc=function(){var t=new egret.ByteArray;t.endian=egret.Endian.LITTLE_ENDIAN,t.writeByte(5),t.writeByte(26);var e=t.length;t.writeUTFBytes("AAAABBBBCCCCDDDD"),t.length=e+100,t.position=t.length,e=t.length,t.writeUTFBytes("123456"),t.length=e+16,t.position=t.length,t.writeByte(1),t.writeByte(1),e=t.length,t.writeUTFBytes("TestUser"+Math.floor(1e8*Math.random())),t.length=e+32,t.position=t.length,t.writeInt(1),e=t.length,t.writeUTFBytes("xfj_H5_main"),t.length=e+25,t.position=t.length,e=t.length,t.writeUTFBytes("imeih5"),t.length=e+25,t.position=t.length,e=t.length,t.writeUTFBytes("1.1.1.1"),t.length=e+20,t.position=t.length,t.writeInt(5),this.pSocket.webSocket.writeBytes(t)},t}();__reflect(MyTestLink.prototype,"MyTestLink");var SocketManager=function(t){function e(){var e=t.call(this)||this;return e.m_bTestLink=!1,e.heartTick=0,e.m_bActive=!1,e.m_pRunningSocket=null,e.m_pListSockets=[],e.addEventListener("packet_5_44",e.onPing,e),e}return __extends(e,t),e.SendPacket=function(t){null==e.g_pSocketMng&&(e.g_pSocketMng=new e),null!=e.g_pSocketMng.m_pRunningSocket&&e.g_pSocketMng.m_pRunningSocket.webSocket.writeBytes(t,0,0)},e.getInstance=function(){return null==e.g_pSocketMng&&(e.g_pSocketMng=new e),e.g_pSocketMng},e.prototype.LoginOk=function(t,e){for(var n=0;n<this.m_pListSockets.length;n++)this.m_pListSockets[n].pSocket==t&&(this.m_pListSockets[n].linkTick=egret.getTimer()+15e3*Math.random(),this.m_pListSockets[n].onLoginOk(e))},e.prototype.LinkOk=function(t){if(this.m_bTestLink)for(var e=0;e<this.m_pListSockets.length;e++)this.m_pListSockets[e].pSocket==t&&(this.m_pListSockets[e].linkTick=egret.getTimer()+15e3*Math.random(),this.m_pListSockets[e].onlinkOk());else if(null==this.m_pRunningSocket){this.m_pRunningSocket=t,this.heartTick=0;var n=new egret.ByteArray;this.dispatchEventWith("packet_5_0",!1,n)}else t.webSocket.close()},e.prototype.StartConnet=function(){console.log("ZYL StartConnet"),this.m_bActive=!0,this.m_pRunningSocket=null;for(var t=0;t<e.s_svrIps.length;t++){var n=null;if(this.m_pListSockets.length>t)n=this.m_pListSockets[t].pSocket;else{n=new BaseWSocket(this);var i=new MyTestLink;i.pSocket=n,i.linkTick=0,this.m_pListSockets.push(i)}n.ConnetTo(e.s_svrIps[t],8999)}},e.prototype.CheckNetConnected=function(t){if(this.m_bTestLink)for(var e=(egret.getTimer(),0);e<this.m_pListSockets.length;e++)this.m_pListSockets[e].rqHeatBeat();else if(null==this.m_pRunningSocket&&(this.heartTick+=t,this.heartTick>15&&(this.heartTick=0,this.StartConnet())),0!=this.m_bActive||1!=t)if(this.heartTick+t<7){if(this.heartTick+=t,this.m_pRunningSocket){var n=new egret.ByteArray;n.endian=egret.Endian.LITTLE_ENDIAN,n.writeByte(5),n.writeByte(44),this.m_pRunningSocket.webSocket.writeBytes(n,0,0)}}else this.heartTick=0,this.StartConnet()},e.prototype.onPing=function(t){this.heartTick=0},e.s_svrIps=["wss://h5xfg.zdjoys.com","ws://10.10.10.121:8999"],e}(egret.EventDispatcher);__reflect(SocketManager.prototype,"SocketManager");var ZPacket=function(){function t(){}return t}();__reflect(ZPacket.prototype,"ZPacket");var GameMain=function(t){function e(){var e=t.call(this,"skin_BallSlideGame")||this;return e.exa_BalanceBar=new BalanceBar,e.exa_TouchScreenLeft=new TouchScreenLeft,e.exa_TouchScreenRight=new TouchScreenRight,e.exa_Ball=new Ball(e.exa_BalanceBar),e.init(),e}return __extends(e,t),e.getInstance=function(){return null==e.g_GameMain&&(e.g_GameMain=new e),e.g_GameMain},e.prototype.init=function(){null!=e.g_GameMain,this.addChild(this.exa_BalanceBar),this.addChild(this.exa_Ball),this.addChild(this.exa_TouchScreenLeft),this.addChild(this.exa_TouchScreenRight)},e.g_GameMain=null,e}(UIBaseMenu);__reflect(GameMain.prototype,"GameMain");var MainMenu=function(){function t(){this.m_pGameMain=GameMain.getInstance()}return t.getInstance=function(){return null==t.pMainMenu&&(t.pMainMenu=new t),t.pMainMenu},t.prototype.Update=function(){},t.pMainMenu=null,t}();__reflect(MainMenu.prototype,"MainMenu");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,n){function i(i){e.call(n,i,t)}if(RES.hasRes(t)){var r=RES.getRes(t);r?i(r):RES.getResAsync(t,i,this)}else RES.getResByUrl(t,i,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var UICenter=function(t){function e(){var e=t.call(this)||this;return e.m_vInViewMenu=[],e.touchEnabled=!1,e}return __extends(e,t),e.getInstance=function(){return null==e.g_uiCenter&&(e.g_uiCenter=new e),e.g_uiCenter},e.prototype.Update=function(){for(var t=0;t<this.m_vInViewMenu.length;t++)this.m_vInViewMenu[t].m_bMyVisable&&this.m_vInViewMenu[t].Update(),this.m_vInViewMenu[t].visible=this.m_vInViewMenu[t].m_bMyVisable},e.prototype.OpenForm=function(t){this.CloseForm(t);for(var e=0;e<this.m_vInViewMenu.length;e++)if(this.m_vInViewMenu[e].m_nZorder>t.m_nZorder)return this.addChildAt(t,e),void this.m_vInViewMenu.splice(e,0,t);this.addChild(t),this.m_vInViewMenu.push(t)},e.prototype.CloseForm=function(t){for(var e=0;e<this.m_vInViewMenu.length;e++)if(this.m_vInViewMenu[e]==t)return this.removeChild(t),void this.m_vInViewMenu.splice(e,1)},e.g_uiCenter=null,e}(eui.UILayer);__reflect(UICenter.prototype,"UICenter");